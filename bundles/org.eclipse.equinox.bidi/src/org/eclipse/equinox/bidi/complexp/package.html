<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<META name="Author" content="Matitiahu Allouche">
</head>
<body bgcolor="white">

This package provides an interface and implementing classes for
processing complex expressions.


<h2>Introduction to Complex Expressions</h2>
<p>
Bidirectional text offers interesting challenges to presentation systems.
For plain text, the Unicode Bidirectional Algorithm
(<a href="http://www.unicode.org/reports/tr9/">UBA</a>)
generally specifies satisfactorily how to reorder Bidirectional text for
display. This algorithm is implemented in Java's presentation system.</p>
<p>
However, all Bidirectional text is not necessarily plain text. There
are also instances of text structured to follow a given syntax, which
should be reflected in the display order. The general algorithm, which
has no awareness of these special cases, often gives incorrect results
when displaying such structured text.</p>
<p>
The general idea in handling complex expressions is to add directional
formatting characters at proper locations in the text to supplement the
standard algorithm, so that the final result is correctly displayed
using the UBA.
A class which handles complex expressions is thus a transformation
engine which receives text without directional formatting characters
as input and produces as output the same text with added directional
formatting characters, hopefully in the minimum quantity which is
sufficient to ensure correct display, considering the type of complex
expression involved.</p>
<p>
In this package, text without directional formatting characters is
called <b><i>lean</i></b> text while the text with added directional
formatting characters is called <b><i>full</i></b> text.</p>
<p>
{@link <a href="IComplExpProcessor.html">IComplExpProcessor</a>} provides
an interface for processing complex expressions.  This package also
includes several classes which implement <code>IComplExpProcessor</code>,
all of them based on class
{@link <a href="ComplExpBasic.html">ComplExpBasic</a>}.
<p>
There is also a class named
<code>ComplExpDoNothing</code> which actually adds no directional
formatting characters. It can be considered as a null processor in
relation to complex expressions. This class has a very small overhead and
can be used as a low-cost default processor when no complex expression is
involved and no processing is needed, but a general framework of
handling complex expressions must be preserved.</p>
<p>
The class {@link <a href="ComplExpBasic.html">ComplExpBasic</a>} can
handle several types of relatively simple complex expressions.</p>
<p>
A number of subclasses of <code>ComplExpBasic</code> are included in this
package, each one adapted to handle some type of complex expression.
The explicitly supported types are:
<ul>
  <li>property (name=value)</li>
  <li>compound name (xxx_yy_zzzz)</li>
  <li>comma delimited list</li>
  <li>system(user)</li>
  <li>directory and file path</li>
  <li>e-mail address</li>
  <li>URL</li>
  <li>regular expression</li>
  <li>Xpath</li>
  <li>Java code</li>
  <li>SQL statements</li>
  <li>RTL arithmetic expressions</li>
</ul>
<p>
More types can be supported using the classes provided in the package.
It is also possible to develop new classes to handle types of
complex expressions which cannot be supported with the existing classes.
Using the framework provided by <code>IComplExpProcessor</code> and
<code>ComplExpBasic</code> can facilitate
considerably the development of such new support.</p>
<p>
The class {@link <a href="ComplExpUtil.html">ComplExpUtil</a>} provides
a number of convenience methods to process some common types of
complex expressions. When using methods in this class, there is no need
to refer to members of other classes of this package.
However, the other classes allow more precise control and possibly better
performance.</p>
<p>

<p>&nbsp;</p>

<h2>Abbreviations used in the documentation of this package</h2>

<dl>
<dt><b>UBA</b><dd>Unicode Bidirectional Algorithm

<dt><b>Bidi</b><dd>Bidirectional

<dt><b>GUI</b><dd>Graphical User Interface

<dt><b>UI</b><dd>User Interface

<dt><b>LTR</b><dd>Left to Right

<dt><b>RTL</b><dd>Right to Left

<dt><b>LRM</b><dd>Left-to-Right Mark

<dt><b>RLM</b><dd>Right-to-Left Mark

<dt><b>LRE</b><dd>Left-to-Right Embedding

<dt><b>RLE</b><dd>Right-to-Left Embedding

<dt><b>PDF</b><dd>Pop Directional Formatting
</dl>

<p>&nbsp;</p>

<h2>Known Limitations</h2>

<p>The proposed solution is making extensive usage of LRM, RLM, LRE, RLE
and PDF directional controls which are invisible but affect the way Bidi
text is displayed. The following related two key points merit special
attention:</p>

<ul>
<li>Implementations of the UBA on various platforms (e.g., Windows and
Linux) are very similar but nevertheless have known differences. Those
differences are minor and will not have a visible effect in most cases.
However there might be cases in which the same Bidi text on two
platforms might look different. These differences will surface in Java
applications when they use the platform visual components for their UI
(e.g., AWT, SWT).</li>

<li>It is assumed that the presentation engine supports LRE, RLE and
PDF directional formatting characters.</li>

<li>Because some presentation engines are not strictly conformant to the
UBA, the implementation of complex expressions in this package adds LRM
or RLM characters in association with LRE, RLE or PDF in cases where
this would not be needed if the presentation engine was fully conformant
to the UBA. Such added marks will not have harmful effects on
conformant presentation engines and will help less conformant engines to
achieve the desired presentation.</li>
</ul>

<p>&nbsp;</p>

<h2>References</h2>

@see <a href="IComplExpProcessor.html">IComplExpProcessor</a>
@see <a href="ComplExpBasic.html">ComplExpBasic</a>
@see <a href="ComplExpDoNothing.html">ComplExpDoNothing</a>

</body>
</html>
